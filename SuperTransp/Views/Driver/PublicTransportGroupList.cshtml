@* @model List<SuperTransp.Models.PublicTransportGroupViewModel> *@
@{
	Layout = "";
}
<!DOCTYPE HTML>
<html>

<head>
	<title>Socios - Seleccionar Organización</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
	<link rel="stylesheet" href="~/assets/css/main.css" />
	<noscript><link rel="stylesheet" href="~/assets/css/noscript.css" /></noscript>
	<link rel="icon" type="image/x-icon" href="~/images/Logo.ico" />

	@*DataTable************************************************************************@
	<link rel="stylesheet" href="~/datatable/css/bootstrap.css" />
	<link rel="stylesheet" href="~/datatable/css/dataTables.bootstrap4.min.css" />
	<link rel="stylesheet" href="~/datatable/css/responsive.bootstrap4.min.css" />
	@*************************************************************************************@

</head>
<body class="is-preload">
	<div style="width:100%; max-width: 100em; margin: 0 auto; padding: 0 1em;">
		<!-- Header -->
		<header id="header">
			<div class="inner">
				<!-- Logo -->
				<a href="#" class="logo">
					<span><img src="~/images/Logo.png" width="100px" height="100px" alt="" /></span>
					<br />
					<span>@ViewBag.EmployeeName</span>
					<br />
					<span>Agregar socios a organización de transporte</span>
				</a>
			</div>

			<!-- Nav -->
			<nav>
				<ul>
					<li><a href="#menu">Menu</a></li>
				</ul>
			</nav>
		</header>

		<!-- Menu -->
		<nav id="menu">
			<h2>Menu</h2>
			<ul>
				<li>@Html.ActionLink("Inicio", "Index", "Home")</li>
				<li>@Html.ActionLink("Socios/Transportistas", "Index", "Driver")</li>
				<li>@Html.ActionLink("Salir", "Login", "Security")</li>
			</ul>
		</nav>

		<div id="main">
			<div class="inner">
				<!-- Form -->
				<section>
					<h4 style="color:#4cbece"> Seleccione una organización</h4>
					<br />
					<div id="loadingSpinner" style="text-align:center; padding:1em;">
						<div class="spinner-border text-info" role="status">
							<span class="sr-only">Cargando...</span>
						</div>
					</div>
					<table id="inventory" class="table table-striped table-bordered dt-responsive dt-nowrap">
						<thead>
							<tr>
								<th>Nombre</th>
								<th>Tipo</th>
								<th>Rif</th>
								<th>Cupos</th>
								<th>Cargados</th>
								<th>Estado</th>
							</tr>
						</thead>
					</table>
				</section>
			</div>
		</div>
	</div>

	<!-- Scripts -->
	<script src="~/assets/js/jquery.min.js"></script>
	<script src="~/assets/js/browser.min.js"></script>
	<script src="~/assets/js/breakpoints.min.js"></script>
	<script src="~/assets/js/util.js"></script>
	<script src="~/assets/js/main.js"></script>

	@*DataTable*******************************************@
	<script src="~/datatable/js/jquery-3.5.1.js"></script>
	<script src="~/datatable/js/jquery.dataTables.min.js"></script>
	<script src="~/datatable/js/dataTables.bootstrap4.js"></script>
	<script src="~/datatable/js/dataTables.responsive.min.js"></script>
	<script src="~/datatable/js/responsive.bootstrap4.min.js"></script>
	@{
		await Html.RenderPartialAsync("_ValidationScriptsPartial");
	}
	@***********************************************************@

	<script type="text/javascript">

		$(document).ready(function () {
			var checkExistingUrl = '@Url.Action("GetPublicTransportGroup", "Driver")';
			var urlPtg = '@Url.Action("Add", "Driver")';

			$('#loadingSpinner').show();

			var table = $('#inventory').DataTable({
				ajax: {
					url: checkExistingUrl,
					dataSrc: function (json) {
						$('#loadingSpinner').fadeOut();
						return json.data;
					}
				},
				pageLength: 10,
				lengthMenu: [10, 25, 50, 100, 500, 1000, 2000, 3000],
				columns: [
					{
						data: 'nombre',
						render: function (data, type, row) {
							return `<a href="${urlPtg}?publicTransportGroupId=${row.id}&pTGCompleteName=${encodeURIComponent(data)}">${data}</a>`;
						}
					},
					{ data: 'tipo' },
					{ data: 'rif' },
					{ data: 'cupos' },
					{ data: 'cargados' },
					{ data: 'estado' }
				],
				stateSave: true,
				language: {
					sProcessing: "Procesando...",
					sLengthMenu: "Mostrar _MENU_ registros",
					sZeroRecords: "No se encontraron resultados",
					sEmptyTable: "Ningún dato disponible en esta tabla",
					sInfo: "Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",
					sInfoEmpty: "Mostrando registros del 0 al 0 de un total de 0 registros",
					sInfoFiltered: "(filtrado de un total de _MAX_ registros)",
					sSearch: "Buscar:",
					oPaginate: {
						sFirst: "Primero",
						sLast: "Último",
						sNext: "Siguiente",
						sPrevious: "Anterior"
					}
				}
			});
		});
	</script>
</body>
</html>